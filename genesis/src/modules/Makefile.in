# ColdX driver

CFLAGS=@CFLAGS@ -I../include -I../
LDFLAGS=@LDFLAGS@
LIBS=@LIBS@
CC=@CC@
RANLIB=@RANLIB@
LINT=@LINT@
YACC=@YACC@

SYS=@SYS@
CPU=@CPU@
VENDOR=@VENDOR@

prefix=@prefix@
BINDIR=$(prefix)/bin
SRCDIR=$(prefix)/src
MODULES=$(SRCDIR)/modules

VERSION=@VERSION@

CDC_OBJS = cdc_buffer.o cdc_integer.o cdc_object.o cdc_time.o \
           cdc_dict.o cdc_list.o cdc_string.o cdc_file.o \
           cdc_network.o cdc_sys.o
COLDCORE_O = coldcore_cml.o coldcore_veil.o

SRCS = `echo $(CDC_OBJS) $(COLDCORE_O) | sed -e 's/\.o/.c/g'`

#######
# rules

libs: libcdc.a libColdCore.a

libcdc.a: $(CDC_OBJS)
	rm -f $@
	ar -cq $@ $(CDC_OBJS)
	$(RANLIB) $@

libColdCore.a: $(COLDCORE_O)
	rm -f $@
	ar -cq $@ $(COLDCORE_O)
	$(RANLIB) $@

clean:
	rm -f lib*.a *~ *.BAK *.bak *.o

scrub: clean

makefile:
	@cd $(prefix); configure -q

install: libs

depend:
	@makedepend -- $(CFLAGS) -- $(SRCS)
	@rm Makefile.bak

lint:
	$(LINT) -u $(SRCS)

patchable: scrub
	@chmod -f u+w Makefile
	@echo "all:" > Makefile
	@echo "	@echo \"** Invalid Makefile! **\"" >> Makefile
	@echo "	@echo \"** running the configure script ... **\"" >> Makefile
	@echo "	@cd ../..; configure" >> Makefile

y.tab.h:
	cd ../; make grammar.o

# DO NOT DELETE THIS LINE -- make depend depends on it.

cdc_buffer.o: ../include/config.h ../y.tab.h ../include/cdc_types.h
cdc_buffer.o: ../include/regexp.h ../include/ident.h ../include/list.h
cdc_buffer.o: ../include/cdc_string.h
cdc_buffer.o: ../include/buffer.h
cdc_buffer.o: ../include/dict.h ../include/object.h ../include/data.h
cdc_buffer.o: ../include/operators.h ../include/execute.h
cdc_buffer.o: ../include/io.h
cdc_integer.o: ../include/config.h
cdc_integer.o: ../include/defs.h ../y.tab.h
cdc_integer.o: ../include/operators.h ../include/execute.h
cdc_integer.o: ../include/data.h ../include/cdc_types.h ../include/regexp.h
cdc_integer.o: ../include/ident.h ../include/list.h ../include/cdc_string.h
cdc_integer.o: ../include/buffer.h ../include/dict.h
cdc_integer.o: ../include/object.h ../include/io.h
cdc_object.o: ../include/config.h
cdc_object.o: ../include/defs.h ../y.tab.h
cdc_object.o: ../include/cdc_types.h ../include/regexp.h ../include/ident.h
cdc_object.o: ../include/list.h ../include/cdc_string.h
cdc_object.o: ../include/buffer.h ../include/dict.h ../include/object.h
cdc_object.o: ../include/data.h ../include/operators.h ../include/execute.h
cdc_object.o: ../include/io.h
cdc_object.o: ../include/util.h ../include/lookup.h
cdc_time.o: ../include/config.h
cdc_time.o: ../include/defs.h ../y.tab.h
cdc_time.o: ../include/cdc_types.h ../include/regexp.h ../include/ident.h
cdc_time.o: ../include/list.h ../include/cdc_string.h
cdc_time.o: ../include/buffer.h ../include/dict.h ../include/object.h
cdc_time.o: ../include/data.h ../include/operators.h ../include/execute.h
cdc_time.o: ../include/io.h
cdc_time.o: ../include/util.h
cdc_dict.o: ../include/config.h ../y.tab.h ../include/operators.h
cdc_dict.o: ../include/execute.h
cdc_dict.o: ../include/data.h ../include/cdc_types.h ../include/regexp.h
cdc_dict.o: ../include/ident.h ../include/list.h ../include/cdc_string.h
cdc_dict.o: ../include/buffer.h ../include/dict.h
cdc_dict.o: ../include/object.h ../include/io.h ../include/memory.h
cdc_list.o: ../include/config.h ../y.tab.h ../include/operators.h
cdc_list.o: ../include/execute.h
cdc_list.o: ../include/data.h ../include/cdc_types.h ../include/regexp.h
cdc_list.o: ../include/ident.h ../include/list.h ../include/cdc_string.h
cdc_list.o: ../include/buffer.h ../include/dict.h
cdc_list.o: ../include/object.h ../include/io.h ../include/memory.h
cdc_string.o: ../include/config.h
cdc_string.o: ../y.tab.h ../include/operators.h
cdc_string.o: ../include/execute.h
cdc_string.o: ../include/data.h ../include/cdc_types.h
cdc_string.o: ../include/regexp.h ../include/ident.h ../include/list.h
cdc_string.o: ../include/cdc_string.h
cdc_string.o: ../include/buffer.h ../include/dict.h ../include/object.h
cdc_string.o: ../include/io.h ../include/match.h ../include/util.h
cdc_file.o: ../include/config.h
cdc_file.o: ../include/defs.h
cdc_file.o: ../y.tab.h ../include/operators.h ../include/execute.h
cdc_file.o: ../include/data.h ../include/cdc_types.h
cdc_file.o: ../include/regexp.h ../include/ident.h ../include/list.h
cdc_file.o: ../include/cdc_string.h ../include/buffer.h ../include/dict.h
cdc_file.o: ../include/object.h ../include/io.h ../include/memory.h
cdc_file.o: ../include/util.h
cdc_network.o: ../include/config.h ../include/defs.h ../y.tab.h
cdc_network.o: ../include/cdc_types.h ../include/regexp.h ../include/ident.h
cdc_network.o: ../include/list.h ../include/cdc_string.h
cdc_network.o: ../include/buffer.h
cdc_network.o: ../include/dict.h ../include/object.h ../include/data.h
cdc_network.o: ../include/execute.h
cdc_network.o: ../include/io.h ../include/net.h
cdc_sys.o: ../include/config.h ../include/defs.h ../y.tab.h
cdc_sys.o: ../include/cdc_types.h ../include/regexp.h ../include/ident.h
cdc_sys.o: ../include/list.h ../include/cdc_string.h
cdc_sys.o: ../include/buffer.h ../include/dict.h
cdc_sys.o: ../include/object.h ../include/data.h ../include/execute.h
cdc_sys.o: ../include/io.h
coldcore_cml.o: ../include/config.h
coldcore_cml.o: ../include/defs.h ../y.tab.h ../include/cdc_types.h
coldcore_cml.o: ../include/regexp.h ../include/ident.h ../include/list.h
coldcore_cml.o: ../include/cdc_string.h ../include/buffer.h ../include/dict.h
coldcore_cml.o: ../include/object.h ../include/data.h
coldcore_veil.o: ../include/config.h ../include/defs.h ../y.tab.h
coldcore_veil.o: ../include/cdc_types.h ../include/regexp.h ../include/ident.h
coldcore_veil.o: ../include/list.h ../include/cdc_string.h
coldcore_veil.o: ../include/buffer.h ../include/dict.h
coldcore_veil.o: ../include/object.h ../include/data.h ../include/operators.h
coldcore_veil.o: ../include/execute.h
coldcore_veil.o: ../include/io.h ../include/memory.h
